### 1.什么是并发竞争  
就是多客户端同时并发写一个key，可能本来应该先到的数据后到了，导致数据版本错了。或者是多客户端同时获取一个key，修改值之后再写回去，只要顺序错了，数据就错了。
### 2.怎么解决  
采用分布式锁+数据修改的时间戳 方案来解决。   

①想要向缓存中写入数据时，必须要获得分布式锁，只有获得锁了才可以去进行缓存数据的写入，写入结束释放锁。就可以保证同时只有一个客户端去写缓存。   

②可是并不能保证每个客户端获取锁的顺序。但是我们要写入缓存的数据都是从数据库查询出来的，数据库都是有这种数据的创建时间的，所以可以在更新之前，先去对比自己的这条数据的时间和缓存中数据的时间，谁更新，如果自己更新则写入覆盖，否则直接放弃本次操作。  

这样就可以保证并发操作时的数据顺序问题。  

![解决方案示意图.png](https://upload-images.jianshu.io/upload_images/8494967-d478273aefbf5f5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

